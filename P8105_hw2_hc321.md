P8105_hw2_hc3212
================
Hening cui
2021/10/3

## Problem 1

Read and clean the Mr. Trash Wheel sheet.

``` r
trash_wheel_df = 
  read_excel("./data/Trashwheel.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N408") %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(sports_balls = as.integer(sports_balls))
```

Read and clean precipitation data for 2018 and 2019.

``` r
pre_2018_df = 
  read_excel("./data/Trashwheel.xlsx", sheet = "2018 Precipitation", range = "A2:B15") %>%
  janitor::clean_names() %>% 
  drop_na(month, total) %>% 
  mutate(year = 2018) %>% 
  relocate(year) 

pre_2019_df = 
  read_excel("./data/Trashwheel.xlsx", sheet = "2019 Precipitation", range = "A2:B15") %>%
  janitor::clean_names() %>% 
  drop_na(month, total) %>% 
  mutate(year = 2019) %>%
  relocate(year) 
```

Precipitation combine.

``` r
NPre_df= 
  bind_rows(pre_2018_df, pre_2019_df) %>% 
  mutate(month = month.name[month])
```

The first data set was generated by Mr. Trashwheel trash collector in
Baltimore, Maryland which include the information of trash entering,
colletion and dumpster storage. The dataset contains information on
dumpster, month, year, date, weight_tons, volume_cubic_yards,
plastic_bottles, polystyrene, cigarette_butts, glass_bottles,
grocery_bags, chip_bags, sports_balls, homes_powered. There are a total
of 344 rows in our final dataset.

The second data set was the month precipitation data in 2018 and 2019.
The dataset contains information on year, month, total. There are a
total of 18 rows in our final dataset.

-   The total precipitation in 2018 was 70.33 inches.
-   The median number of sports balls found in a dumpster in 2019 was
    8.5

## Problem 2

Read and clean pols-month.csv.

``` r
pols_month_df = 
  read_csv("./data/fivethirtyeight/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  separate(mon, into = c("year", "month", "day"), sep = "-") %>% 
  mutate(month = month.name[as.integer(month)]) 
```

    ## Rows: 822 Columns: 9

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
pols_month_clean = 
  pivot_longer(
    pols_month_df, 
    prez_gop:rep_dem,
    names_to  = "president",
    values_to  = "values"
  ) %>% 
  filter(!president %in% c("prez_dem","prez_gop")) %>% 
  select(-day)
view(pols_month_clean)
```

Read and clean snp.csv.

``` r
snp_df = 
  read_csv("./data/fivethirtyeight/snp.csv") %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(date = mdy(as.character(date))) %>% 
  separate(date, into = c("year", "month", "day"), sep = "-") %>% 
  mutate(month = month.name[as.integer(month)]) %>% 
  arrange(year, month) %>% 
  relocate(year, month)
```

    ## Rows: 787 Columns: 2

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
view(snp_df) 
```

Read and clean unemployment.csv.

``` r
unemployment_df = 
  read_csv("./data/fivethirtyeight/unemployment.csv") %>% 
  janitor::clean_names() %>% 
  drop_na() 
```

    ## Rows: 68 Columns: 13

    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec

    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
unemployment_clean =
  pivot_longer(
    unemployment_df,
    jan:dec,
    names_to = "month",
    values_to = "percentage"
  ) %>% 
view(unemployment_clean)
```

Join the datasets.

``` r
pols_tidy =
  pols_month_clean %>% 
  mutate(month = as.Date(as.character(month),"%B"))
  
pols_snp_df = 
  left_join(pols_month_clean,snp_df,by = c("year" = "year", "month" = "month")) %>% 
  mutate(year = as.double(year))
Fivethirtyfive =
  left_join(pols_snp_df,unemployment_clean, by = c("year" = "year", "month" = "month"))
Fivethirtyfive
```

    ## # A tibble: 4,932 × 7
    ##     year month    president values day   close percentage
    ##    <dbl> <chr>    <chr>      <dbl> <chr> <dbl>      <dbl>
    ##  1  1947 January  gov_gop       23 <NA>     NA         NA
    ##  2  1947 January  sen_gop       51 <NA>     NA         NA
    ##  3  1947 January  rep_gop      253 <NA>     NA         NA
    ##  4  1947 January  gov_dem       23 <NA>     NA         NA
    ##  5  1947 January  sen_dem       45 <NA>     NA         NA
    ##  6  1947 January  rep_dem      198 <NA>     NA         NA
    ##  7  1947 February gov_gop       23 <NA>     NA         NA
    ##  8  1947 February sen_gop       51 <NA>     NA         NA
    ##  9  1947 February rep_gop      253 <NA>     NA         NA
    ## 10  1947 February gov_dem       23 <NA>     NA         NA
    ## # … with 4,922 more rows
